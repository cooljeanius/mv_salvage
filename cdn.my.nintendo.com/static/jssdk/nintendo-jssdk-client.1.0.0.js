/**
 * Modules in this bundle
 * @license
 * 
 * nintendo-javascript-sdk:
 *   version: 1.0.0
 * 
 * babel-runtime:
 *   license: MIT
 *   author: Sebastian McKenzie <sebmck@gmail.com>
 *   maintainers: sebmck <sebmck@gmail.com>
 *   homepage: https://github.com/babel/babel#readme
 *   version: 5.8.34
 * 
 * core-js:
 *   license: MIT
 *   maintainers: zloirock <zloirock@zloirock.ru>
 *   homepage: https://github.com/zloirock/core-js#readme
 *   version: 1.2.6
 * 
 * pct-encode:
 *   license: BSD
 *   maintainers: grncdr <glurgle@gmail.com>
 *   contributors: Andrei Neculau <andrei.neculau@gmail.com>, Stephen Sugden <me@stephensugden.com>
 *   homepage: https://github.com/grncdr/pct-encode#readme
 *   version: 1.0.2
 * 
 * punycode:
 *   license: MIT
 *   author: Mathias Bynens
 *   maintainers: mathias <mathias@qiwi.be>, reconbot <wizard@roborooter.com>
 *   contributors: Mathias Bynens, John-David Dalton
 *   homepage: https://mths.be/punycode
 *   version: 1.4.0
 * 
 * querystring-es3:
 *   licenses: MIT
 *   author: Irakli Gozalishvili <rfobic@gmail.com>
 *   maintainers: spaintrain <mc.s.pain.how.er+npm@gmail.com>
 *   homepage: https://github.com/mike-spainhower/querystring
 *   version: 0.2.1
 * 
 * uri-template:
 *   license: MIT
 *   author: Stephen Sugden <me@stephensugden.com>
 *   maintainers: grncdr <glurgle@gmail.com>, andreineculau <andrei.neculau@gmail.com>
 *   contributors: Stephen Sugden <me@stephensugden.com>, Andrei Neculau <andrei.neculau@gmail.com>
 *   homepage: https://github.com/grncdr/uri-template
 *   version: 1.0.0
 * 
 * url:
 *   license: MIT
 *   maintainers: coolaj86 <coolaj86@gmail.com>, shtylman <shtylman@gmail.com>
 *   homepage: https://github.com/defunctzombie/node-url
 *   version: 0.10.3
 * 
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
!function e(t,r,n){function o(i,a){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/define-property")["default"],i=e("babel-runtime/helpers/get")["default"],a=e("babel-runtime/helpers/inherits")["default"],u=e("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("./util.js"),c=u(l),f="notification",p="request",h="response",d={},m=function(){function e(t){var r;o(this,e),this.target=t,this.listeners=(r={},s(r,f,{}),s(r,p,{}),s(r,h,{}),r),this.channelId=c.origin()+":"+c.sequence.next("channel"),d[this.channelId]=this}return n(e,[{key:"addRequestListener",value:function(e,t){this.listeners[p][e]=t}},{key:"removeRequestListener",value:function(e){delete this.listeners[p][e]}},{key:"addNotifyListener",value:function(e,t){this.listeners[f][e]=t}},{key:"removeNotifyListener",value:function(e){delete this.listeners[f][e]}},{key:"notify",value:function(e,t){this.postMessage({type:f,topic:e,extra:t})}},{key:"request",value:function(e,t,r){var n=c.sequence.next("channel:"+this.channelId);this.listeners[h][n]=r,this.postMessage({type:p,topic:e,id:n,parameters:t})}},{key:"response",value:function(e,t,r){this.postMessage({type:h,topic:e,id:t,result:r})}},{key:"dispatch",value:function(e){var t=e.data,r=t.topic,n=!1;t.type===f&&this.listeners[f][r]?(this.listeners[f][r](t),n=!0):t.type===p&&this.listeners[p][r]?(this.listeners[p][r](t),n=!0):t.type===h&&this.listeners[h][t.id]&&(this.listeners[h][t.id](t),delete this.listeners[h][t.id],n=!0),n&&"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}}]),e}(),b=function(e){function t(e,r,n){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.targetOrigin=r,this.sourceWindow=n,n.addEventListener("message",this)}return a(t,e),n(t,[{key:"dispose",value:function(){this.sourceWindow.removeEventListener("message",this),this.target=null,delete d[this.channelId]}},{key:"handleEvent",value:function(e){e.origin===this.targetOrigin&&this.dispatch(e)}},{key:"postMessage",value:function(e){this.target?"undefined"==typeof this.target.postMessage?c.log.debug("WindowChannel.postMessage: called with non channel object ",this.target):this.target.postMessage(e,this.targetOrigin):c.log.debug("WindowChannel.postMessage: cannot called with disposed channel ",this)}}]),t}(m);r.WindowChannel=b;var g=function(e){function t(e){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),e.addEventListener("message",this)}return a(t,e),n(t,[{key:"dispose",value:function(){this.target.removeEventListener("message",this),this.target=null,delete d[this.channelId]}},{key:"handleEvent",value:function(e){this.dispatch(e)}},{key:"postMessage",value:function(e){this.target.postMessage(e)}}]),t}(m);r.WorkerChannel=g},{"./util.js":22,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/define-property":41,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-wildcard":45}],2:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/object/keys")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){o(this,e),this.modalIframeOpen=!1}return n(e,[{key:"createIframe",value:function(e,t){var r=e.url;t=t||function(){};var n=document.createElement("iframe");return e.id&&(n.name=e.id),t.done=!1,t&&(n.onload=function(){n.onload=null,t.done||(t.done=!0,t(n))}),n.src=r,n}},{key:"createInvisibleIframe",value:function(e,t){var r=this.createIframe(e,t);return this.css(r,{display:"none",width:0,height:0}),document.body.appendChild(r),{window:r.contentWindow,iframe:r,dispose:function(){document.body.removeChild(r),r=null}}}},{key:"createWindow",value:function(e){e.windowFeatures=e.windowFeatures||"";var t=window.open(e.url,e.id,e.windowFeatures);return{window:t,dispose:function(){t&&(t.close(),t=null)}}}},{key:"adjust",value:function(e,t){t=t||{},this.css(e,{"margin-top":"-"+(e.offsetHeight/2+(t.y||0))+"px","margin-left":"-"+(e.offsetWidth/2+(t.x||0))+"px"})}},{key:"css",value:function(e,t){var r=" ";s(t).forEach(function(e){r+=e+": "+String(t[e])+";"}),e.style.cssText+=r}},{key:"addClass",value:function(e,t){""===e.className?e.className=t:e.className+=" "+t}}]),e}();r["default"]=new i,t.exports=r["default"]},{"babel-runtime/core-js/object/keys":33,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40}],3:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/core-js/object/assign")["default"],u=e("babel-runtime/core-js/reflect/construct")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l="https://jssdk.accounts.nintendo.com",c=function(e){function t(e){if(s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.message=e,Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else{var r=new Error;r.stack&&(this.stack=r.stack)}this.name=this.constructor.name}return o(t,e),t}(Error);r.ExtendableError=c;var f=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),t}(c);r.NintendoInitError=f;var p={300:"Multiple Choices",301:"Moved Parmanently",302:"Found",303:"See Other",304:"Not Modified",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",408:"Request Timeout",409:"Conflict",413:"Payload Too Large",414:"URI Too Long",429:"Too Many Request",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},h=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),t}(c);r.HTTPError=h;var d=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),t}(h);r.HTTPTimeoutError=d;var m=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),t}(h);r.HTTPInternalError=m;var b=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,t);var r=e.body||"";n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,r),this.status=e.status,this.headers=e.headers||{},this.body=r}return o(t,e),i(t,[{key:"toAPIError",value:function(){if("object"==typeof this.body)return new y(this.body);var e=p[this.status]||"Malformed Response";return new y({status:this.status,errorCode:e.toLowerCase().split(" ").join("_"),title:e,detail:this.body})}}]),t}(h);r.HTTPResponseError=b;var g=void 0,v=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"toObject",value:function(){var e=a({},this);return{className:this.className,properties:e}}}],[{key:"create",value:function(e){var t=g[e.className];return u(t,[e.properties])}}]),t}(c);r.SerializableError=v;var y=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.detail),this.type=e.type||l+"/errors/1.0.0/"+e.status+"/"+e.errorCode,this.status=e.status,this.errorCode=e.errorCode,this.title=e.title,this.detail=e.detail,this.instance=e.instance}return o(t,e),i(t,[{key:"toAPIError",value:function(){return this}},{key:"className",get:function(){return"APIError"}}],[{key:"create",value:function(e){return e.toAPIError?e.toAPIError():new t({status:500,errorCode:e.name.toLowerCase(),title:e.name,detail:e.message,instance:"about:blank"})}},{key:"createFromOAuthResult",value:function(e){return new t({status:400,errorCode:e.response.error.toLowerCase(),title:e.response.error,detail:e.response.error_description,instance:"about:blank"})}}]),t}(v);r.APIError=y,g={APIError:y}},{"babel-runtime/core-js/object/assign":28,"babel-runtime/core-js/reflect/construct":36,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43}],4:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/interop-require-default")["default"],o=e("./nintendo.js"),s=n(o);window.$nintendo=s["default"]},{"./nintendo.js":5,"babel-runtime/helpers/interop-require-default":44}],5:[function(e,t,r){"use strict";function n(){var e="nintendoReady",t=void 0;"function"==typeof CustomEvent?t=new CustomEvent(e,{}):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),document.dispatchEvent(t)}var o=e("babel-runtime/helpers/create-class")["default"],s=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"],u=e("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("./nintendo/oauth.js"),c=a(l),f=e("./nintendo/event.js"),p=a(f),h=e("./nintendo/api.js"),d=a(h),m=e("./nintendo/client.js"),b=a(m),g=e("./nintendo/error.js"),v=a(g),y=e("./util.js"),j=u(y),$=e("./polyfill/deferred.js"),w=a($),x=function(){function e(){s(this,e),this._readyState=new w["default"],this.client=new b["default"],this.oauth=new c["default"](this),this.event=new p["default"](this),this.api=new d["default"](this),this.error=new v["default"](this)}return o(e,[{key:"version",get:function(){return"1.0.0"}},{key:"name",get:function(){return"nintendo-jssdk"}}]),o(e,[{key:"init",value:function(e){var t=this;return i.resolve().then(function(){return j.log.debug("client initialization process start:",e),t.client.init(e),i.all([t.oauth.init(e),t.api.init(e)])}).then(function(e){return j.log.debug("successfully finished client initialization process:",e),n(),t._readyState.resolve(t)},function(e){return j.log.error("catch exception on client initialization process:",e),t.ready})}},{key:"clearStorage",value:function(){j.log.debug("clear all storage data"),this.api.removeToken(),this.oauth.clearSessionState()}},{key:"ready",get:function(){return this._readyState.promise}}]),e}();r["default"]=new x,t.exports=r["default"]},{"./nintendo/api.js":6,"./nintendo/client.js":11,"./nintendo/error.js":12,"./nintendo/event.js":13,"./nintendo/oauth.js":15,"./polyfill/deferred.js":16,"./util.js":22,"babel-runtime/core-js/promise":35,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require-default":44,"babel-runtime/helpers/interop-require-wildcard":45}],6:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/promise")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"],a=e("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("url"),l=i(u),c=e("../util.js"),f=a(c),p=e("../chrome.js"),h=i(p),d=e("../channel.js"),m=e("../error.js"),b=e("../storage.js"),g=a(b),v=e("./api/pointWallet.js"),y=i(v),j=e("./api/user.js"),$=i(j),w=e("./api/userNotification.js"),x=i(w),_={xdframe:"/static/jssdk/xdframe.1.0.0.html"},k=function(){function e(t){o(this,e),this.$nintendo=t,this.pointWallet=new y["default"],this.user=new $["default"],this.userNotification=new x["default"]}return n(e,[{key:"init",value:function(e){this.apiOrigin=e.apiOrigin;var t=this;return s.race([f.timeoutPromise(5e3),new s(function(r){h["default"].createInvisibleIframe({url:e.apiOrigin+_.xdframe+("#parent_origin="+f.origin()+"&connect_origin="+e.connectOrigin),id:"proxy-frame"},function(n){var o=n.contentWindow;t.channel=new d.WindowChannel(o,e.apiOrigin,window.self),f.log.debug("proxy frame is loaded"),r()})})])}},{key:"sendRequest",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?null:arguments[1];r=r||function(){},this.sendRequestNoRetry(e)["catch"](function(r){if(r&&r instanceof m.APIError&&401==r.status)return t.refreshToken().then(function(){return t.sendRequestNoRetry(e)});throw r}).then(function(e){r(null,e)},function(e){r(e,null)})}},{key:"sendRequestNoRetry",value:function(e){var t=this;return new s(function(r,n){var o=t.apiOrigin+l["default"].format({pathname:e.path,query:e.query||{}}),s={method:e.method,url:o,headers:e.headers,body:e.body,options:{storage_suffix:g.sessionState.get(t.$nintendo.client.clientId)}};t.channel.request("api_request",s,function(e){var t=e.result;if(t.error){var s=m.SerializableError.create(t.error);s instanceof m.APIError&&(s.instance=o),n(s)}else r(t.data)})})}},{key:"refreshToken",value:function(){var e=this,t=this._tokenState;return this._tokenState||(t=this._tokenState=new s(function(t,r){var n=g.sessionState.get(e.$nintendo.client.clientId);e.$nintendo.oauth.retryAuthorization({sessionState:n},function(n,o){if(n){var s=m.APIError.createFromOAuthResult(n);r(s)}else t();e._tokenState=null})})),t}},{key:"removeToken",value:function(){var e=g.sessionState.get(this.$nintendo.client.clientId);this.channel.request("remove_token",{storage_suffix:e},function(t){f.log.debug("removed tokens for ",e)})}}]),e}();r["default"]=k,t.exports=r["default"]},{"../channel.js":1,"../chrome.js":2,"../error.js":3,"../storage.js":17,"../util.js":22,"./api/pointWallet.js":8,"./api/user.js":9,"./api/userNotification.js":10,"babel-runtime/core-js/promise":35,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require-default":44,"babel-runtime/helpers/interop-require-wildcard":45,url:145}],7:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/to-consumable-array")["default"],i=e("babel-runtime/core-js/object/assign")["default"],a=e("babel-runtime/core-js/get-iterator")["default"],u=e("babel-runtime/core-js/set")["default"],l=e("babel-runtime/core-js/object/keys")["default"],c=e("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(r,"__esModule",{value:!0});var f=e("uri-template"),p=c(f),h=e("../../util.js"),d=c(h),m=e("../../error.js"),b=function(){function e(){o(this,e),this.templates={}}return n(e,[{key:"create",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e=e||{};var r=this.getEndpointFragment("create"),n=this.expandUriTemplate(r,e),o=e.queryParams,s=this.getRestParams(r,e);this.request({method:"POST",path:n,query:o,body:s},t)}},{key:"get",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e=e||{};var r=this.getEndpointFragment("get"),n=this.expandUriTemplate(r,e),o=e.queryParams,s=this.extractAcceptableHeaders("get",e.headers);this.request({method:"GET",path:n,query:o,headers:s},t)}},{key:"getAll",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e=e||{};var r=this.getEndpointFragment("getAll"),n=this.expandUriTemplate(r,e),o=e.queryParams,s=this.extractAcceptableHeaders("getAll",e.headers);this.request({method:"GET",path:n,query:o,headers:s},t)}},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e=e||{};var r=this.getEndpointFragment("update"),n=this.expandUriTemplate(r,e),o=this.getRestParams(r,e),s=e.queryParams;this.request({method:"PUT",path:n,query:s,body:o},t)}},{key:"patch",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];e=e||{},t=t||[];var n=this.getEndpointFragment("patch"),o=this.expandUriTemplate(n,e),s=e.queryParams,a=this.extractAcceptableHeaders("getAll",e.headers);this.request({method:"PATCH",path:o,query:s,body:t,headers:i({"Content-Type":"application/json-patch+json"},a)},r)}},{key:"delete",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e=e||{};var r=this.getEndpointFragment("delete"),n=this.expandUriTemplate(r,e),o=e.queryParams;this.request({method:"DELETE",path:n,query:o},t)}},{key:"getEndpointFragment",value:function(e){return this.endpointFragments[e]||this.endpointFragments["default"]}},{key:"expandUriTemplate",value:function(e,t){var r=this.templates[e.template];r||(r=this.templates[e.template]=p.parse(e.template));var n=(e.parameters||[]).filter(function(e){return!(e in t)});if(n.length>0)throw new m.APIError({status:400,errorCode:"invalid_params",title:"Invalid Params",detail:"Missing required parameter(s): "+n,instance:"about:blank"});return r.expand(t)}},{key:"getRestParams",value:function(e,t){var r=i({},t),n=!0,o=!1,s=void 0;try{for(var u,l=a(e.parameters||[]);!(n=(u=l.next()).done);n=!0){var c=u.value;delete r[c]}}catch(f){o=!0,s=f}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw s}}var p=!0,h=!1,d=void 0;try{for(var m,b=a(e.optionalParameters||[]);!(p=(m=b.next()).done);p=!0){var c=m.value;delete r[c]}}catch(f){h=!0,d=f}finally{try{!p&&b["return"]&&b["return"]()}finally{if(h)throw d}}return delete r.queryParams,r}},{key:"getAcceptableHeaderKeySet",value:function(e){var t=new u(this.acceptableHeaders["default"]||[]);return(this.acceptableHeaders[e]||[]).forEach(function(e){return t.add(e)}),t}},{key:"extractAcceptableHeaders",value:function(e,t){if(!t)return{};var r=this.getAcceptableHeaderKeySet(e),n=new u,o=l(t).reduce(function(e,o){return r.has(o)?e[o]=t[o]:n.add(o),e},{});return n.size>0&&d.log.warn("ignore headers [ "+[].concat(s(n))+" ]. the header white list is [ "+[].concat(s(r))+" ]."),o}},{key:"request",value:function(e,t){var r={method:e.method,path:e.path,query:e.query,headers:i({"Content-Type":"application/json"},e.headers||{}),body:e.body};$nintendo.api.sendRequest(r,t)}},{key:"acceptableHeaders",get:function(){return{"default":[]}}}]),e}();r["default"]=b,t.exports=r["default"]},{"../../error.js":3,"../../util.js":22,"babel-runtime/core-js/get-iterator":26,"babel-runtime/core-js/object/assign":28,"babel-runtime/core-js/object/keys":33,"babel-runtime/core-js/set":37,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require-wildcard":45,"babel-runtime/helpers/to-consumable-array":48,"uri-template":142}],8:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("./base.js"),u=i(a),l=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.endpointFragments={"default":{template:"/1.0.0/users/{userId}/point_wallet",parameters:["userId"]}}}return o(t,e),t}(u["default"]);r["default"]=l,t.exports=r["default"]},{"./base.js":7,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44}],9:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("./base.js"),u=i(a),l=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.endpointFragments={"default":{template:"/1.0.0/users{/id}",parameters:["id"]}}}return o(t,e),t}(u["default"]);r["default"]=l,t.exports=r["default"]},{"./base.js":7,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44}],10:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./base.js"),l=a(u),c=(e("../../error.js"),function(e){function t(){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.endpointFragments={getAll:{template:"/1.0.0/users{/userId}/notifications",parameters:["userId"]},"default":{template:"/1.0.0/users{/userId}/notifications{/notificationId}",parameters:["userId","notificationId"]}}}return o(t,e),s(t,[{key:"acceptableHeaders",get:function(){return{"default":["If-Match","If-None-Match"]}}}]),t}(l["default"]));r["default"]=c,t.exports=r["default"]},{"../../error.js":3,"./base.js":7,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44}],11:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=e("../util.js"),a=s(i),u=function(){function e(t){o(this,e),this.$nintendo=t}return n(e,[{key:"init",value:function(e){var t=e.connectOrigin,r=e.apiOrigin,n=e.clientId,o=e.clientOrigin,s=e.scope,i=e.responseType,u=e.webMessageTarget,l=e.webMessageUri;return"undefined"==typeof t||"string"!=typeof t?void a.log.error("connectOrigin should be string"):"undefined"==typeof r||"string"!=typeof r?void a.log.error("apiOrigin should be string"):"undefined"==typeof n||"string"!=typeof n?void a.log.error("clientId should be string"):"undefined"==typeof o||"string"!=typeof o?void a.log.error("clientOrigin should be string"):s&&!s instanceof Array?void a.log.error("scope should be Array.<string>"):i&&!i instanceof Array?void a.log.error("responseType should be Array.<string>"):l&&"string"!=typeof l?void a.log.errro("webMessageUri should be string"):u&&"string"!=typeof u?void a.log.error("webMessageTarget should be string"):(this.clientId=n,this.clientOrigin=o,this.connectOrigin=t,this.apiOrigin=r,this.scope=s||["openid"],this.responseType=i||["code","token","id_token"],this.webMessageTarget=u||"op-frame",this.webMessageUri=l||"http://localhost:8080/cb",this)}}]),e}();r["default"]=u,t.exports=r["default"]},{"../util.js":22,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require-wildcard":45}],12:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var o=e("../error.js"),s=function i(e){n(this,i),this.APIError=o.APIError};r["default"]=s,t.exports=r["default"]},{"../error.js":3,"babel-runtime/helpers/class-call-check":39}],13:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/sliced-to-array")["default"],i=e("babel-runtime/helpers/interop-require-wildcard")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../util.js"),l=i(u),c=e("./event/oauth.js"),f=a(c),p=function(){function e(t){o(this,e),this.$nintendo=t,this.sessionStateChangeCallbacks={},this.registeredEvents={"oauth.sessionStateChange":new f["default"](t)},this.listeners={}}return n(e,[{key:"subscribe",value:function(e,t,r){if(!this.registeredEvents[e])return l.log.crit("topic "+e+" is not registered"),null;if(!t)return l.log.crit("params must be object"),null;this.listeners[e]=this.listeners[e]||[];var n=e+":"+l.generateId(),o={id:n,topic:e,params:t,callback:r,data:{}};return this.listeners[e].push(o),this.registeredEvents[e].start(o),n}},{key:"unsubscribe",value:function(e){var t=e.split(/:/,2),r=s(t,1),n=r[0],o=this.getListener(e);return o?(this.registeredEvents[n].stop(o),this.listeners[n]=this.listeners[n].filter(function(t){return t.id!==e}),!0):!1}},{key:"getListener",value:function(e){var t=e.split(/:/,2),r=s(t,1),n=r[0];return(this.listeners[n]||[]).filter(function(t){return t.id===e})[0]}},{key:"emit",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];(this.listeners[e]||[]).forEach(function(e){return e.callback.call(null,r,t)})}},{key:"emitError",value:function(e,t){this.emit(e,null,t)}}]),e}();r["default"]=p,t.exports=r["default"]},{"../util.js":22,"./event/oauth.js":14,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require-default":44,"babel-runtime/helpers/interop-require-wildcard":45,"babel-runtime/helpers/sliced-to-array":47}],14:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(t){o(this,e),this.$nintendo=t}return n(e,[{key:"start",value:function(e){var t=this;e.data.timerId=setInterval(function(){t.$nintendo.oauth.checkSessionState(e.params.sessionState).then(function(r){"changed"==r.status&&(t.$nintendo.event.emit(e.topic,r),t.$nintendo.event.unsubscribe(e.id))})},1e3)}},{key:"stop",value:function(e){clearInterval(e.data.timerId)}}]),e}();r["default"]=s,t.exports=r["default"]},{"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40}],15:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/promise")["default"],i=e("babel-runtime/helpers/interop-require-wildcard")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../util.js"),l=i(u),c=e("../storage.js"),f=i(c),p=e("../chrome.js"),h=a(p),d=e("../channel.js"),m={opframe:"/static/jssdk/opframe.1.0.0.html",authorize:"/connect/1.0.0/authorize",disconnect:"/connect/1.0.0/disconnect",endSession:"/connect/1.0.0/end_session"},b="op-frame",g="op-immediate-login-frame",v=function(){function e(t){o(this,e),this.$nintendo=t,this.authzListeners={}}return n(e,[{key:"init",value:function(e){var t=this,r=e.connectOrigin;return s.race([s.all([new s(function(e){t.immediateLoginFrame=h["default"].createInvisibleIframe({url:"about:blank",id:g},function(n){t.immediateLoginChannel=new d.WindowChannel(n.contentWindow,r,window.self),e()})}),new s(function(n){t.opFrame=h["default"].createInvisibleIframe({url:r+m.opframe+("#parent_origin="+l.origin()+"&api_origin="+e.apiOrigin),id:b},function(e){t.opFrameChannel=new d.WindowChannel(e.contentWindow,r,window.self),n()})})]),l.timeoutPromise(5e3)]).then(function(){window.addEventListener("message",function(e){e.data&&"relay_request"===e.data.type&&(l.log.debug("main frame receive 'relay_request'"),e.source.postMessage({type:"relay_response"},r))}),t.opFrameChannel.addNotifyListener("proxy_authorization_response",function(e){l.log.debug("main frame receive 'proxy_authorization_response'",e);var r=e.extra,n=t.authzListeners[r.state];n||l.log.warn("unregistered authorization process",r),n(r)})})}},{key:"authorizationRequest",value:function(e,t){var r=this;return new s(function(t){r.authzListeners[e.state]=function(n){delete r.authzListeners[e.state],t(r.processAuthorization(e,n))}})}},{key:"processAuthorization",value:function(e,t){var r=!1,n=!1,o={};if(e.state!==t.state)l.log.warn("state is changed",e.state,t.state),o={error:"invalid_state",error_description:"respond 'state' paramter does not match request"};else if(t.error){switch(t.error){case"consent_required":r=!0;break;case"access_denied":r=!0}o={error:t.error,error_description:t.error_description}}else r=!0,n=!0,t.session_state!==e.sessionState&&l.log.debug("session_state is changed"),f.authorizeRequest.set(e.clientId,t.session_state,e),f.sessionState.set(e.clientId,t.session_state),t.id_token&&(o.idToken=t.id_token),t.code&&(o.code=t.code),t.token_type&&(o.tokenType=t.token_type),t.expires_in&&(o.expiresIn=t.expires_in),t.scope&&(o.scope=t.scope.split(" ").sort());return t.state&&(o.state=t.state),t.session_state&&(o.sessionState=t.session_state),{login:r,connected:n,response:o}}},{key:"getConnectedStatus",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];l.log.debug("[$nintendo.oauth.getConnectedStatus] start");var n=this.createRequest({responseType:e.responseType||this.$nintendo.client.responseType,scope:e.scope,state:e.state,prompt:"none",display:"touch"});l.log.debug("[$nintendo.oauth.getConnectedStatus] send request",n),window.setTimeout(function(){t.immediateLoginFrame.iframe.src=n.uri},1),this.authorizationRequest(n,this.immediateLoginChannel.targetWindow).then(function(e){l.log.debug("[$nintendo.oauth.getConnectedStatus] done",e),e.response.error?r(e):r(null,e)},function(e){l.log.error("[$nintendo.oauth.getConnectedStatus] error",e)})}},{key:"connect",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];l.log.debug("[$nintendo.oauth.connect] start");var r=this.createRequest({responseType:e.responseType||this.$nintendo.client.responseType,scope:e.scope,state:e.state,prompt:"consent",display:"touch"});l.log.debug("[$nintendo.oauth.connect] send request",r);var n=h["default"].createWindow({url:r.uri,id:"unauthenticated_window"});this.authorizationRequest(r,n.window).then(function(e){l.log.debug("[$nintendo.oauth.connect] done",e),e.response.error?t(e):t(null,e)},function(e){l.log.error("[$nintendo.oauth.connect] error",e)}).then(function(){n.dispose()})}},{key:"retryAuthorization",value:function(e,t){var r=e.sessionState;l.log.debug("[$nintendo.oauth.retryAuthorization] start");var n=f.authorizeRequest.get(this.$nintendo.client.clientId,r);n?(l.log.debug("[$nintendo.oauth.retryAuthorization] reauthorize with last request params",n),this.getConnectedStatus({responseType:n.responseType,scope:n.scope},t)):(l.log.info("retry authorization failed because last login history does not exist"),t({response:{error:"unauthorized",error_description:"unauthorized"}}))}},{key:"disconnect",value:function(){l.log.debug("[$nintendo.oauth.disconnect] start")}},{key:"logout",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];l.log.debug("[$nintendo.oauth.logout] start");var r=this.$nintendo.client;return new s(function(t){var n=h["default"].createWindow({url:""+r.connectOrigin+m.endSession+"?"+l.encodeQuery({sdk_version:e.$nintendo.version,client_id:r.clientId,post_logout_redirect_uri:r.clientOrigin,response_mode:"web_message"
}),id:"logout_window"});e.logoutChannel&&e.logoutChannel.dispose();var o=e.logoutChannel=new d.WindowChannel(n.window,r.connectOrigin,window.self);o.addNotifyListener("logout_response",function(e){l.log.debug("main frame receive 'logout_response' notification",e),n.dispose(),o.dispose(),t(e.extra)})}).then(function(r){r.error?t(r):(e.$nintendo.clearStorage(),t(null,r))})}},{key:"checkSessionState",value:function(e){var t=this;return new s(function(r){t.opFrameChannel.request("session_state_change_request",{clientId:t.$nintendo.client.clientId,sessionState:e},function(e){var n=e.result;"changed"===n.status&&t.$nintendo.clearStorage(),r(n)})})}},{key:"clearSessionState",value:function(){f.sessionState.clear(this.$nintendo.client.clientId),f.authorizeRequest.clear(this.$nintendo.client.clientId)}},{key:"createRequest",value:function(e){var t={clientId:e.clientId||this.$nintendo.client.clientId,state:e.state||l.generateId(),responseType:e.responseType||["code","token","id_token"],scope:e.scope||["openid","user"],redirectUri:this.$nintendo.client.clientOrigin,webMessageUri:this.opFrameChannel.targetOrigin,webMessageTarget:b,responseMode:"web_message",prompt:e.prompt,display:e.display};return t.uri=this.opFrameChannel.targetOrigin+m.authorize+"?"+l.encodeQuery({client_id:t.clientId,state:t.state,response_type:t.responseType.sort().join(" "),scope:t.scope.sort().join(" "),redirect_uri:t.redirectUri,web_message_uri:t.webMessageUri,web_message_target:t.webMessageTarget,response_mode:t.responseMode,prompt:t.prompt,display:t.display}),t}}]),e}();r["default"]=v,t.exports=r["default"]},{"../channel.js":1,"../chrome.js":2,"../storage.js":17,"../util.js":22,"babel-runtime/core-js/promise":35,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require-default":44,"babel-runtime/helpers/interop-require-wildcard":45}],16:[function(e,t,r){"use strict";function n(){if("undefined"!=typeof o&&o.defer)return o.defer();if("undefined"!=typeof PromiseUtils&&PromiseUtils.defer)return PromiseUtils.defer();try{this.resolve=null,this.reject=null,this.promise=new o(function(e,t){this.resolve=e,this.reject=t}.bind(this)),s(this)}catch(e){throw new Error("Promise/Deferred is not available")}}var o=e("babel-runtime/core-js/promise")["default"],s=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":31,"babel-runtime/core-js/promise":35}],17:[function(e,t,r){(function(t){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"],i=e("babel-runtime/helpers/interop-require-wildcard")["default"],a=e("babel-runtime/helpers/interop-require")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("babel-runtime/core-js/string/starts-with"),l=s(u),c=e("./util.js"),f=i(c),p=function(){function e(){o(this,e),this.store=t.localStorage}return n(e,[{key:"namespace",get:function(){throw Error("this is abstract method")}}]),n(e,[{key:"prefix",value:function(){return this.namespace?this.namespace+":":""}},{key:"setItem",value:function(e,t,r){var n=this.prefix()+e,o={value:t};if(r){var s=f.unixtime()+r;o.expire=s}try{this.store.setItem(n,JSON.stringify(o))}catch(i){f.log.debug("Storage: setItem error = ",i)}}},{key:"getItem",value:function(e){var t=this.prefix()+e,r=void 0,n=this.store.getItem(t);if(null===n)return null;try{r=JSON.parse(n)}catch(o){return f.log.debug("nintendo.storage: JSON parse error: jsonItem = ",n),null}return r&&(!r.expire||r.expire>f.unixtime())?r.value:(f.log.debug("nintendo.storage: getItem not found with k =",t),null)}},{key:"removeItem",value:function(e){var t=this.prefix()+e;this.store.removeItem(t)}},{key:"keys",value:function(){for(var e=[],t=this.prefix(),r=0;r<this.store.length;r++){var n=this.store.key(r);l["default"](n,t)&&e.push(n.substring(t.length))}return e}}]),e}();r["default"]=p;var h=e("./storage/authorizeRequest.js");r.authorizeRequest=a(h);var d=e("./storage/sessionState.js");r.sessionState=a(d);var m=e("./storage/status.js");r.status=a(m);var b=e("./storage/token.js");r.token=a(b)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./storage/authorizeRequest.js":18,"./storage/sessionState.js":19,"./storage/status.js":20,"./storage/token.js":21,"./util.js":22,"babel-runtime/core-js/string/starts-with":38,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/interop-require":46,"babel-runtime/helpers/interop-require-default":44,"babel-runtime/helpers/interop-require-wildcard":45}],18:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/core-js/get-iterator")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("../storage.js"),c=u(l),f=e("babel-runtime/core-js/string/starts-with"),p=u(f),h=function(e){function t(){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),s(t,[{key:"key",value:function(e,t){return"authorize_params:"+e+":"+t}},{key:"get",value:function(e,t){return this.getItem(this.key(e,t))}},{key:"set",value:function(e,t,r){this.setItem(this.key(e,t),r)}},{key:"clear",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(t)this.removeItem(this.key(e,t));else{var r=this.keys(),n=this.key(e,""),o=!0,s=!1,i=void 0;try{for(var u,l=a(r);!(o=(u=l.next()).done);o=!0){var c=u.value;p["default"](c,n)&&this.removeItem(c)}}catch(f){s=!0,i=f}finally{try{!o&&l["return"]&&l["return"]()}finally{if(s)throw i}}}}},{key:"namespace",get:function(){return"npf"}}]),t}(c["default"]);r["default"]=new h,t.exports=r["default"]},{"../storage.js":17,"babel-runtime/core-js/get-iterator":26,"babel-runtime/core-js/string/starts-with":38,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44}],19:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../storage.js"),l=a(u),c=function(e){function t(){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),s(t,[{key:"key",value:function(e){return"session_state:"+e}},{key:"get",value:function(e){return this.getItem(this.key(e))}},{key:"set",value:function(e,t){this.setItem(this.key(e),t)}},{key:"clear",value:function(e){this.removeItem(this.key(e))}},{key:"namespace",get:function(){return"npf"}}]),t}(l["default"]);r["default"]=new c,t.exports=r["default"]},{"../storage.js":17,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44}],20:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../storage.js"),l=a(u),c=function(e){function t(){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),s(t,[{key:"key",value:function(e){return"status:"+e}},{key:"set",value:function(e,t){var r=t.accessToken,n=t.expiresIn,o=t.scope;this.setItem(this.key(e),{access_token:r,expires_in:n,scope:o})}},{key:"get",value:function(e){return this.getItem(this.key(e))}},{key:"clear",value:function(e){this.removeItem(this.key(e))}},{key:"namespace",get:function(){return"opframe"}},{key:"expire",get:function(){return 900}}]),t}(l["default"]);r["default"]=new c,t.exports=r["default"]},{"../storage.js":17,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44}],21:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/core-js/object/keys")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"],l=e("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(r,"__esModule",{value:!0});var c=e("../storage.js"),f=u(c),p=e("../util.js"),h=l(p),d=function(e){function t(){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),s(t,[{key:"key",value:function(e){var t=e.sessionState,r=e.clientOrigin;return"tokenData:"+r+":"+t}},{key:"setTokens",value:function(e){var t=parseInt(e.expires_in),r={};e.scope&&e.scope.forEach(function(e){r[e]=!0});var n={access_token:e.access_token,scopes:r};h.log.debug("stored tokens to storage:",n),this.setItem(this.key(e.storage_suffix),n,t)}},{key:"getTokens",value:function(e){var t=this.getItem(this.key(e.storage_suffix));return t?(h.log.debug("token not expired: tokenData = ",t),e.scope&&e.scope.some(function(e){return!t.scopes[e]})?(h.log.debug("claimed scopes are not fully authorized before: claimed =",e.scope,"authorized =",a(t.scopes)),null):t):(h.log.debug("token not found or expired: tokenData = ",t),null)}},{key:"removeTokens",value:function(e){this.removeItem(this.key(e.storage_suffix))}},{key:"namespace",get:function(){return"xdframe"}}]),t}(f["default"]);r["default"]=new d,t.exports=r["default"]},{"../storage.js":17,"../util.js":22,"babel-runtime/core-js/object/keys":33,"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40,"babel-runtime/helpers/get":42,"babel-runtime/helpers/inherits":43,"babel-runtime/helpers/interop-require-default":44,"babel-runtime/helpers/interop-require-wildcard":45}],22:[function(e,t,r){"use strict";function n(){return Date.now()/1e3|0}function o(){return Math.floor(n())}function s(e){return a(document.cookie,"; ")[e]}function i(){return Array.apply(null,Array(32)).map(function(){return Math.floor(16*Math.random()).toString(16)}).join("")}function a(e){var t=arguments.length<=1||void 0===arguments[1]?"&":arguments[1];return e.split(t).map(function(e){return e.split("=",2)}).reduce(function(e,t){return t[0].length>0&&(e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])),e},{})}function u(e){var t=arguments.length<=1||void 0===arguments[1]?"&":arguments[1];return m(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t]||"")}).join(t)}function l(e){return e.split("\n").map(function(e){return(e||"").trim().split(":",2)}).reduce(function(e,t){return t[0].length>0&&(e[t[0]]=(t[1]||"").trim()),e},{})}function c(e){return new b(function(t){return window.setTimeout(t,e)})}function f(e){return c(e).then(function(){return b.reject()})}function p(e){var t=document.createElement("a");return t.href=e,t.origin||t.protocol+"//"+t.hostname}function h(){var e=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return e?parseInt(e[1]):void 0}function d(){return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}var m=e("babel-runtime/core-js/object/keys")["default"],b=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(r,"__esModule",{value:!0}),r.unixtime=n,r.unixtimeStamp=o,r.getCookie=s,r.generateId=i,r.decodeQuery=a,r.encodeQuery=u,r.parseHeaderText=l,r.delayPromise=c,r.timeoutPromise=f,r.parseOrigin=p,r.getIEVersion=h,r.origin=d;var g=e("./util/log.js");Object.defineProperty(r,"log",{enumerable:!0,get:function(){return g.log}});var v=e("./util/sequence.js");Object.defineProperty(r,"sequence",{enumerable:!0,get:function(){return v.sequence}})},{"./util/log.js":23,"./util/sequence.js":24,"babel-runtime/core-js/object/keys":33,"babel-runtime/core-js/promise":35}],23:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=1,i=2,a=3,u=4,l={debug:s,info:i,warn:a,crit:u},c=function(){},f=function(){function e(t){o(this,e),t||(t="debug"),this.setLogLevel(t)}return n(e,[{key:"setLogLevel",value:function(e){this.logLevel=l[e],this.debug=this.logLevel<=s?Function.prototype.bind.call(console.log,console):c,this.info=this.logLevel<=i?Function.prototype.bind.call(console.log,console):c,this.warn=this.logLevel<=a?Function.prototype.bind.call(console.warn,console):c,this.crit=this.logLevel<=u?Function.prototype.bind.call(console.error,console):c,this.error=Function.prototype.bind.call(console.error,console)}}]),e}(),p=new f("warn");r.log=p},{"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40}],24:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=Math.pow(2,53),i=function(){function e(){o(this,e),this.sequences={}}return n(e,[{key:"next",value:function(e){return this.sequences[e]||(this.sequences[e]=0),++this.sequences[e]===s&&(this.sequences[e]=1),this.sequences[e]}},{key:"reset",value:function(e){this.sequences[e]=0}}]),e}(),a=new i;r.sequence=a},{"babel-runtime/helpers/class-call-check":39,"babel-runtime/helpers/create-class":40}],25:[function(e,t,r){t.exports={"default":e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":49}],26:[function(e,t,r){t.exports={"default":e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":50}],27:[function(e,t,r){t.exports={"default":e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":51}],28:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":52}],29:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":53}],30:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":54}],31:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":55}],32:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":56}],33:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":57}],34:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":58}],35:[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":59}],36:[function(e,t,r){t.exports={"default":e("core-js/library/fn/reflect/construct"),__esModule:!0}},{"core-js/library/fn/reflect/construct":60}],37:[function(e,t,r){t.exports={"default":e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":61}],38:[function(e,t,r){t.exports={"default":e("core-js/library/fn/string/starts-with"),__esModule:!0}},{"core-js/library/fn/string/starts-with":62}],39:[function(e,t,r){"use strict";r["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r.__esModule=!0},{}],40:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/define-property")["default"];r["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),n(e,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r.__esModule=!0},{"babel-runtime/core-js/object/define-property":30}],41:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/define-property")["default"];r["default"]=function(e,t,r){return t in e?n(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},r.__esModule=!0},{"babel-runtime/core-js/object/define-property":30}],42:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/get-own-property-descriptor")["default"];r["default"]=function(e,t,r){for(var o=!0;o;){var s=e,i=t,a=r;o=!1,null===s&&(s=Function.prototype);var u=n(s,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var c=Object.getPrototypeOf(s);if(null===c)return void 0;e=c,t=i,r=a,o=!0,u=c=void 0}},r.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":32}],43:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/create")["default"],o=e("babel-runtime/core-js/object/set-prototype-of")["default"];r["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=n(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o?o(e,t):e.__proto__=t)},r.__esModule=!0},{"babel-runtime/core-js/object/create":29,"babel-runtime/core-js/object/set-prototype-of":34}],44:[function(e,t,r){"use strict";r["default"]=function(e){return e&&e.__esModule?e:{"default":e}},r.__esModule=!0},{}],45:[function(e,t,r){"use strict";r["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t},r.__esModule=!0},{}],46:[function(e,t,r){"use strict";r["default"]=function(e){return e&&e.__esModule?e["default"]:e},r.__esModule=!0},{}],47:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/get-iterator")["default"],o=e("babel-runtime/core-js/is-iterable")["default"];r["default"]=function(){function e(e,t){var r=[],o=!0,s=!1,i=void 0;try{for(var a,u=n(e);!(o=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{!o&&u["return"]&&u["return"]()}finally{if(s)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(o(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r.__esModule=!0},{"babel-runtime/core-js/get-iterator":26,"babel-runtime/core-js/is-iterable":27}],48:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/array/from")["default"];r["default"]=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return n(e)},r.__esModule=!0},{"babel-runtime/core-js/array/from":25}],49:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/$.core").Array.from},{"../../modules/$.core":71,"../../modules/es6.array.from":122,"../../modules/es6.string.iterator":133}],50:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":120,"../modules/es6.string.iterator":133,"../modules/web.dom.iterable":136}],51:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":121,"../modules/es6.string.iterator":133,"../modules/web.dom.iterable":136}],52:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":71,"../../modules/es6.object.assign":124}],53:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t){return n.create(e,t)}},{"../../modules/$":95}],54:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t,r){return n.setDesc(e,t,r)}},{"../../modules/$":95}],55:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/$.core").Object.freeze},{"../../modules/$.core":71,"../../modules/es6.object.freeze":125}],56:[function(e,t,r){var n=e("../../modules/$");e("../../modules/es6.object.get-own-property-descriptor"),t.exports=function(e,t){return n.getDesc(e,t)}},{"../../modules/$":95,"../../modules/es6.object.get-own-property-descriptor":126}],57:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":71,"../../modules/es6.object.keys":127}],58:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":71,"../../modules/es6.object.set-prototype-of":128}],59:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":71,"../modules/es6.object.to-string":129,"../modules/es6.promise":130,"../modules/es6.string.iterator":133,"../modules/web.dom.iterable":136}],60:[function(e,t,r){e("../../modules/es6.reflect.construct"),t.exports=e("../../modules/$.core").Reflect.construct},{"../../modules/$.core":71,"../../modules/es6.reflect.construct":131}],61:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),t.exports=e("../modules/$.core").Set},{"../modules/$.core":71,"../modules/es6.object.to-string":129,"../modules/es6.set":132,"../modules/es6.string.iterator":133,"../modules/es7.set.to-json":135,"../modules/web.dom.iterable":136}],62:[function(e,t,r){e("../../modules/es6.string.starts-with"),t.exports=e("../../modules/$.core").String.startsWith},{"../../modules/$.core":71,"../../modules/es6.string.starts-with":134}],63:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],64:[function(e,t,r){t.exports=function(){}},{}],65:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":87}],66:[function(e,t,r){var n=e("./$.cof"),o=e("./$.wks")("toStringTag"),s="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[o])?r:s?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},{"./$.cof":67,"./$.wks":118}],67:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],68:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.hide"),s=e("./$.redefine-all"),i=e("./$.ctx"),a=e("./$.strict-new"),u=e("./$.defined"),l=e("./$.for-of"),c=e("./$.iter-define"),f=e("./$.iter-step"),p=e("./$.uid")("id"),h=e("./$.has"),d=e("./$.is-object"),m=e("./$.set-species"),b=e("./$.descriptors"),g=Object.isExtensible||d,v=b?"_s":"size",y=0,j=function(e,t){if(!d(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!h(e,p)){if(!g(e))return"F";if(!t)return"E";o(e,p,++y)}return"O"+e[p]},$=function(e,t){var r,n=j(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,o){var c=e(function(e,s){a(e,c,t),e._i=n.create(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=s&&l(s,r,e[o],e)});return s(c.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[v]=0},"delete":function(e){var t=this,r=$(t,e);if(r){var n=r.n,o=r.p;delete t._i[r.i],r.r=!0,o&&(o.n=n),n&&(n.p=o),t._f==r&&(t._f=n),t._l==r&&(t._l=o),t[v]--}return!!r},forEach:function(e){for(var t,r=i(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!$(this,e)}}),b&&n.setDesc(c.prototype,"size",{get:function(){return u(this[v])}}),c},def:function(e,t,r){var n,o,s=$(e,t);return s?s.v=r:(e._l=s={i:o=j(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=s),n&&(n.n=s),e[v]++,"F"!==o&&(e._i[o]=s)),e},getEntry:$,setStrong:function(e,t,r){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?f(0,r.k):"values"==t?f(0,r.v):f(0,[r.k,r.v]):(e._t=void 0,f(1))},r?"entries":"values",!r,!0),m(t)}}},{"./$":95,"./$.ctx":72,"./$.defined":73,"./$.descriptors":74,"./$.for-of":79,"./$.has":81,"./$.hide":82,"./$.is-object":87,"./$.iter-define":91,"./$.iter-step":93,"./$.redefine-all":101,"./$.set-species":105,"./$.strict-new":109,"./$.uid":117}],69:[function(e,t,r){var n=e("./$.for-of"),o=e("./$.classof");t.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");var t=[];return n(this,!1,t.push,t),t}}},{"./$.classof":66,"./$.for-of":79}],70:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.global"),s=e("./$.export"),i=e("./$.fails"),a=e("./$.hide"),u=e("./$.redefine-all"),l=e("./$.for-of"),c=e("./$.strict-new"),f=e("./$.is-object"),p=e("./$.set-to-string-tag"),h=e("./$.descriptors");t.exports=function(e,t,r,d,m,b){var g=o[e],v=g,y=m?"set":"add",j=v&&v.prototype,$={};return h&&"function"==typeof v&&(b||j.forEach&&!i(function(){(new v).entries().next()}))?(v=t(function(t,r){c(t,v,e),t._c=new g,void 0!=r&&l(r,m,t[y],t)}),n.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(e){var t="add"==e||"set"==e;e in j&&(!b||"clear"!=e)&&a(v.prototype,e,function(r,n){if(!t&&b&&!f(r))return"get"==e?void 0:!1;var o=this._c[e](0===r?0:r,n);return t?this:o})}),"size"in j&&n.setDesc(v.prototype,"size",{get:function(){return this._c.size}})):(v=d.getConstructor(t,e,m,y),u(v.prototype,r)),p(v,e),$[e]=v,s(s.G+s.W+s.F,$),b||d.setStrong(v,e,m),v}},{"./$":95,"./$.descriptors":74,"./$.export":76,"./$.fails":78,"./$.for-of":79,"./$.global":80,"./$.hide":82,"./$.is-object":87,"./$.redefine-all":101,"./$.set-to-string-tag":106,"./$.strict-new":109}],71:[function(e,t,r){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},{}],72:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":63}],73:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],74:[function(e,t,r){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":78}],75:[function(e,t,r){var n=e("./$.is-object"),o=e("./$.global").document,s=n(o)&&n(o.createElement);t.exports=function(e){return s?o.createElement(e):{}}},{"./$.global":80,"./$.is-object":87}],76:[function(e,t,r){var n=e("./$.global"),o=e("./$.core"),s=e("./$.ctx"),i="prototype",a=function(e,t,r){var u,l,c,f=e&a.F,p=e&a.G,h=e&a.S,d=e&a.P,m=e&a.B,b=e&a.W,g=p?o:o[t]||(o[t]={}),v=p?n:h?n[t]:(n[t]||{})[i];p&&(r=t);for(u in r)l=!f&&v&&u in v,l&&u in g||(c=l?v[u]:r[u],g[u]=p&&"function"!=typeof v[u]?r[u]:m&&l?s(c,n):b&&v[u]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[i]=e[i],t}(c):d&&"function"==typeof c?s(Function.call,c):c,d&&((g[i]||(g[i]={}))[u]=c))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},{"./$.core":71,"./$.ctx":72,"./$.global":80}],77:[function(e,t,r){var n=e("./$.wks")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(o){}}return!0}},{"./$.wks":118}],78:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],79:[function(e,t,r){var n=e("./$.ctx"),o=e("./$.iter-call"),s=e("./$.is-array-iter"),i=e("./$.an-object"),a=e("./$.to-length"),u=e("./core.get-iterator-method");t.exports=function(e,t,r,l){var c,f,p,h=u(e),d=n(r,l,t?2:1),m=0;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(s(h))for(c=a(e.length);c>m;m++)t?d(i(f=e[m])[0],f[1]):d(e[m]);else for(p=h.call(e);!(f=p.next()).done;)o(p,d,f.value,t)}},{"./$.an-object":65,"./$.ctx":72,"./$.is-array-iter":86,"./$.iter-call":89,"./$.to-length":115,"./core.get-iterator-method":119}],80:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],81:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],82:[function(e,t,r){var n=e("./$"),o=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,r){return n.setDesc(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":95,"./$.descriptors":74,"./$.property-desc":100}],83:[function(e,t,r){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":80}],84:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],85:[function(e,t,r){var n=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":67}],86:[function(e,t,r){var n=e("./$.iterators"),o=e("./$.wks")("iterator"),s=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||s[o]===e)}},{"./$.iterators":94,"./$.wks":118}],87:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],88:[function(e,t,r){var n=e("./$.is-object"),o=e("./$.cof"),s=e("./$.wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==o(e))}},{"./$.cof":67,"./$.is-object":87,"./$.wks":118}],89:[function(e,t,r){var n=e("./$.an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(s){var i=e["return"];throw void 0!==i&&n(i.call(e)),s}}},{"./$.an-object":65}],90:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.property-desc"),s=e("./$.set-to-string-tag"),i={};e("./$.hide")(i,e("./$.wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n.create(i,{next:o(1,r)}),s(e,t+" Iterator")}},{"./$":95,"./$.hide":82,"./$.property-desc":100,"./$.set-to-string-tag":106,"./$.wks":118}],91:[function(e,t,r){"use strict";var n=e("./$.library"),o=e("./$.export"),s=e("./$.redefine"),i=e("./$.hide"),a=e("./$.has"),u=e("./$.iterators"),l=e("./$.iter-create"),c=e("./$.set-to-string-tag"),f=e("./$").getProto,p=e("./$.wks")("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",m="keys",b="values",g=function(){return this};t.exports=function(e,t,r,v,y,j,$){l(r,t,v);var w,x,_=function(e){if(!h&&e in A)return A[e];switch(e){case m:return function(){return new r(this,e)};case b:return function(){return new r(this,e)}}return function(){return new r(this,e)}},k=t+" Iterator",O=y==b,q=!1,A=e.prototype,S=A[p]||A[d]||y&&A[y],I=S||_(y);if(S){var P=f(I.call(new e));c(P,k,!0),!n&&a(A,d)&&i(P,p,g),O&&S.name!==b&&(q=!0,I=function(){return S.call(this)})}if(n&&!$||!h&&!q&&A[p]||i(A,p,I),u[t]=I,u[k]=g,y)if(w={values:O?I:_(b),keys:j?I:_(m),entries:O?_("entries"):I},$)for(x in w)x in A||s(A,x,w[x]);
else o(o.P+o.F*(h||q),t,w);return w}},{"./$":95,"./$.export":76,"./$.has":81,"./$.hide":82,"./$.iter-create":90,"./$.iterators":94,"./$.library":96,"./$.redefine":102,"./$.set-to-string-tag":106,"./$.wks":118}],92:[function(e,t,r){var n=e("./$.wks")("iterator"),o=!1;try{var s=[7][n]();s["return"]=function(){o=!0},Array.from(s,function(){throw 2})}catch(i){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var s=[7],i=s[n]();i.next=function(){r=!0},s[n]=function(){return i},e(s)}catch(a){}return r}},{"./$.wks":118}],93:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],94:[function(e,t,r){t.exports={}},{}],95:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],96:[function(e,t,r){t.exports=!0},{}],97:[function(e,t,r){var n,o,s,i=e("./$.global"),a=e("./$.task").set,u=i.MutationObserver||i.WebKitMutationObserver,l=i.process,c=i.Promise,f="process"==e("./$.cof")(l),p=function(){var e,t,r;for(f&&(e=l.domain)&&(l.domain=null,e.exit());n;)t=n.domain,r=n.fn,t&&t.enter(),r(),t&&t.exit(),n=n.next;o=void 0,e&&e.enter()};if(f)s=function(){l.nextTick(p)};else if(u){var h=1,d=document.createTextNode("");new u(p).observe(d,{characterData:!0}),s=function(){d.data=h=-h}}else s=c&&c.resolve?function(){c.resolve().then(p)}:function(){a.call(i,p)};t.exports=function(e){var t={fn:e,next:void 0,domain:f&&l.domain};o&&(o.next=t),n||(n=t,s()),o=t}},{"./$.cof":67,"./$.global":80,"./$.task":112}],98:[function(e,t,r){var n=e("./$"),o=e("./$.to-object"),s=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},r={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(e){r[e]=e}),7!=e({},t)[n]||Object.keys(e({},r)).join("")!=o})?function(e,t){for(var r=o(e),i=arguments,a=i.length,u=1,l=n.getKeys,c=n.getSymbols,f=n.isEnum;a>u;)for(var p,h=s(i[u++]),d=c?l(h).concat(c(h)):l(h),m=d.length,b=0;m>b;)f.call(h,p=d[b++])&&(r[p]=h[p]);return r}:Object.assign},{"./$":95,"./$.fails":78,"./$.iobject":85,"./$.to-object":116}],99:[function(e,t,r){var n=e("./$.export"),o=e("./$.core"),s=e("./$.fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*s(function(){r(1)}),"Object",i)}},{"./$.core":71,"./$.export":76,"./$.fails":78}],100:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],101:[function(e,t,r){var n=e("./$.redefine");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redefine":102}],102:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":82}],103:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],104:[function(e,t,r){var n=e("./$").getDesc,o=e("./$.is-object"),s=e("./$.an-object"),i=function(e,t){if(s(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,o){try{o=e("./$.ctx")(Function.call,n(Object.prototype,"__proto__").set,2),o(t,[]),r=!(t instanceof Array)}catch(s){r=!0}return function(e,t){return i(e,t),r?e.__proto__=t:o(e,t),e}}({},!1):void 0),check:i}},{"./$":95,"./$.an-object":65,"./$.ctx":72,"./$.is-object":87}],105:[function(e,t,r){"use strict";var n=e("./$.core"),o=e("./$"),s=e("./$.descriptors"),i=e("./$.wks")("species");t.exports=function(e){var t=n[e];s&&t&&!t[i]&&o.setDesc(t,i,{configurable:!0,get:function(){return this}})}},{"./$":95,"./$.core":71,"./$.descriptors":74,"./$.wks":118}],106:[function(e,t,r){var n=e("./$").setDesc,o=e("./$.has"),s=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},{"./$":95,"./$.has":81,"./$.wks":118}],107:[function(e,t,r){var n=e("./$.global"),o="__core-js_shared__",s=n[o]||(n[o]={});t.exports=function(e){return s[e]||(s[e]={})}},{"./$.global":80}],108:[function(e,t,r){var n=e("./$.an-object"),o=e("./$.a-function"),s=e("./$.wks")("species");t.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||void 0==(r=n(i)[s])?t:o(r)}},{"./$.a-function":63,"./$.an-object":65,"./$.wks":118}],109:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],110:[function(e,t,r){var n=e("./$.to-integer"),o=e("./$.defined");t.exports=function(e){return function(t,r){var s,i,a=String(o(t)),u=n(r),l=a.length;return 0>u||u>=l?e?"":void 0:(s=a.charCodeAt(u),55296>s||s>56319||u+1===l||(i=a.charCodeAt(u+1))<56320||i>57343?e?a.charAt(u):s:e?a.slice(u,u+2):(s-55296<<10)+(i-56320)+65536)}}},{"./$.defined":73,"./$.to-integer":113}],111:[function(e,t,r){var n=e("./$.is-regexp"),o=e("./$.defined");t.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(e))}},{"./$.defined":73,"./$.is-regexp":88}],112:[function(e,t,r){var n,o,s,i=e("./$.ctx"),a=e("./$.invoke"),u=e("./$.html"),l=e("./$.dom-create"),c=e("./$.global"),f=c.process,p=c.setImmediate,h=c.clearImmediate,d=c.MessageChannel,m=0,b={},g="onreadystatechange",v=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},y=function(e){v.call(e.data)};p&&h||(p=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return b[++m]=function(){a("function"==typeof e?e:Function(e),t)},n(m),m},h=function(e){delete b[e]},"process"==e("./$.cof")(f)?n=function(e){f.nextTick(i(v,e,1))}:d?(o=new d,s=o.port2,o.port1.onmessage=y,n=i(s.postMessage,s,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):n=g in l("script")?function(e){u.appendChild(l("script"))[g]=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(i(v,e,1),0)}),t.exports={set:p,clear:h}},{"./$.cof":67,"./$.ctx":72,"./$.dom-create":75,"./$.global":80,"./$.html":83,"./$.invoke":84}],113:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],114:[function(e,t,r){var n=e("./$.iobject"),o=e("./$.defined");t.exports=function(e){return n(o(e))}},{"./$.defined":73,"./$.iobject":85}],115:[function(e,t,r){var n=e("./$.to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./$.to-integer":113}],116:[function(e,t,r){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}},{"./$.defined":73}],117:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],118:[function(e,t,r){var n=e("./$.shared")("wks"),o=e("./$.uid"),s=e("./$.global").Symbol;t.exports=function(e){return n[e]||(n[e]=s&&s[e]||(s||o)("Symbol."+e))}},{"./$.global":80,"./$.shared":107,"./$.uid":117}],119:[function(e,t,r){var n=e("./$.classof"),o=e("./$.wks")("iterator"),s=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[o]||e["@@iterator"]||s[n(e)]:void 0}},{"./$.classof":66,"./$.core":71,"./$.iterators":94,"./$.wks":118}],120:[function(e,t,r){var n=e("./$.an-object"),o=e("./core.get-iterator-method");t.exports=e("./$.core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./$.an-object":65,"./$.core":71,"./core.get-iterator-method":119}],121:[function(e,t,r){var n=e("./$.classof"),o=e("./$.wks")("iterator"),s=e("./$.iterators");t.exports=e("./$.core").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||s.hasOwnProperty(n(t))}},{"./$.classof":66,"./$.core":71,"./$.iterators":94,"./$.wks":118}],122:[function(e,t,r){"use strict";var n=e("./$.ctx"),o=e("./$.export"),s=e("./$.to-object"),i=e("./$.iter-call"),a=e("./$.is-array-iter"),u=e("./$.to-length"),l=e("./core.get-iterator-method");o(o.S+o.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,c,f=s(e),p="function"==typeof this?this:Array,h=arguments,d=h.length,m=d>1?h[1]:void 0,b=void 0!==m,g=0,v=l(f);if(b&&(m=n(m,d>2?h[2]:void 0,2)),void 0==v||p==Array&&a(v))for(t=u(f.length),r=new p(t);t>g;g++)r[g]=b?m(f[g],g):f[g];else for(c=v.call(f),r=new p;!(o=c.next()).done;g++)r[g]=b?i(c,m,[o.value,g],!0):o.value;return r.length=g,r}})},{"./$.ctx":72,"./$.export":76,"./$.is-array-iter":86,"./$.iter-call":89,"./$.iter-detect":92,"./$.to-length":115,"./$.to-object":116,"./core.get-iterator-method":119}],123:[function(e,t,r){"use strict";var n=e("./$.add-to-unscopables"),o=e("./$.iter-step"),s=e("./$.iterators"),i=e("./$.to-iobject");t.exports=e("./$.iter-define")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},{"./$.add-to-unscopables":64,"./$.iter-define":91,"./$.iter-step":93,"./$.iterators":94,"./$.to-iobject":114}],124:[function(e,t,r){var n=e("./$.export");n(n.S+n.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":76,"./$.object-assign":98}],125:[function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(t):t}})},{"./$.is-object":87,"./$.object-sap":99}],126:[function(e,t,r){var n=e("./$.to-iobject");e("./$.object-sap")("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},{"./$.object-sap":99,"./$.to-iobject":114}],127:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":99,"./$.to-object":116}],128:[function(e,t,r){var n=e("./$.export");n(n.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.export":76,"./$.set-proto":104}],129:[function(e,t,r){},{}],130:[function(e,t,r){"use strict";var n,o=e("./$"),s=e("./$.library"),i=e("./$.global"),a=e("./$.ctx"),u=e("./$.classof"),l=e("./$.export"),c=e("./$.is-object"),f=e("./$.an-object"),p=e("./$.a-function"),h=e("./$.strict-new"),d=e("./$.for-of"),m=e("./$.set-proto").set,b=e("./$.same-value"),g=e("./$.wks")("species"),v=e("./$.species-constructor"),y=e("./$.microtask"),j="Promise",$=i.process,w="process"==u($),x=i[j],_=function(e){var t=new x(function(){});return e&&(t.constructor=Object),x.resolve(t)===t},k=function(){function t(e){var r=new x(e);return m(r,t.prototype),r}var r=!1;try{if(r=x&&x.resolve&&_(),m(t,x),t.prototype=o.create(x.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(r=!1),r&&e("./$.descriptors")){var n=!1;x.resolve(o.setDesc({},"then",{get:function(){n=!0}})),r=n}}catch(s){r=!1}return r}(),O=function(e,t){return s&&e===x&&t===n?!0:b(e,t)},q=function(e){var t=f(e)[g];return void 0!=t?t:e},A=function(e){var t;return c(e)&&"function"==typeof(t=e.then)?t:!1},S=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=p(t),this.reject=p(r)},I=function(e){try{e()}catch(t){return{error:t}}},P=function(e,t){if(!e.n){e.n=!0;var r=e.c;y(function(){for(var n=e.v,o=1==e.s,s=0,a=function(t){var r,s,i=o?t.ok:t.fail,a=t.resolve,u=t.reject;try{i?(o||(e.h=!0),r=i===!0?n:i(n),r===t.promise?u(TypeError("Promise-chain cycle")):(s=A(r))?s.call(r,a,u):a(r)):u(n)}catch(l){u(l)}};r.length>s;)a(r[s++]);r.length=0,e.n=!1,t&&setTimeout(function(){var t,r,o=e.p;E(o)&&(w?$.emit("unhandledRejection",n,o):(t=i.onunhandledrejection)?t({promise:o,reason:n}):(r=i.console)&&r.error&&r.error("Unhandled promise rejection",n)),e.a=void 0},1)})}},E=function(e){var t,r=e._d,n=r.a||r.c,o=0;if(r.h)return!1;for(;n.length>o;)if(t=n[o++],t.fail||!E(t.promise))return!1;return!0},M=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),P(t,!0))},C=function(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===e)throw TypeError("Promise can't be resolved itself");(t=A(e))?y(function(){var n={r:r,d:!1};try{t.call(e,a(C,n,1),a(M,n,1))}catch(o){M.call(n,o)}}):(r.v=e,r.s=1,P(r,!1))}catch(n){M.call({r:r,d:!1},n)}}};k||(x=function(e){p(e);var t=this._d={p:h(this,x,j),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{e(a(C,t,1),a(M,t,1))}catch(r){M.call(t,r)}},e("./$.redefine-all")(x.prototype,{then:function(e,t){var r=new S(v(this,x)),n=r.promise,o=this._d;return r.ok="function"==typeof e?e:!0,r.fail="function"==typeof t&&t,o.c.push(r),o.a&&o.a.push(r),o.s&&P(o,!1),n},"catch":function(e){return this.then(void 0,e)}})),l(l.G+l.W+l.F*!k,{Promise:x}),e("./$.set-to-string-tag")(x,j),e("./$.set-species")(j),n=e("./$.core")[j],l(l.S+l.F*!k,j,{reject:function(e){var t=new S(this),r=t.reject;return r(e),t.promise}}),l(l.S+l.F*(!k||_(!0)),j,{resolve:function(e){if(e instanceof x&&O(e.constructor,this))return e;var t=new S(this),r=t.resolve;return r(e),t.promise}}),l(l.S+l.F*!(k&&e("./$.iter-detect")(function(e){x.all(e)["catch"](function(){})})),j,{all:function(e){var t=q(this),r=new S(t),n=r.resolve,s=r.reject,i=[],a=I(function(){d(e,!1,i.push,i);var r=i.length,a=Array(r);r?o.each.call(i,function(e,o){var i=!1;t.resolve(e).then(function(e){i||(i=!0,a[o]=e,--r||n(a))},s)}):n(a)});return a&&s(a.error),r.promise},race:function(e){var t=q(this),r=new S(t),n=r.reject,o=I(function(){d(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o&&n(o.error),r.promise}})},{"./$":95,"./$.a-function":63,"./$.an-object":65,"./$.classof":66,"./$.core":71,"./$.ctx":72,"./$.descriptors":74,"./$.export":76,"./$.for-of":79,"./$.global":80,"./$.is-object":87,"./$.iter-detect":92,"./$.library":96,"./$.microtask":97,"./$.redefine-all":101,"./$.same-value":103,"./$.set-proto":104,"./$.set-species":105,"./$.set-to-string-tag":106,"./$.species-constructor":108,"./$.strict-new":109,"./$.wks":118}],131:[function(e,t,r){var n=e("./$"),o=e("./$.export"),s=e("./$.a-function"),i=e("./$.an-object"),a=e("./$.is-object"),u=Function.bind||e("./$.core").Function.prototype.bind;o(o.S+o.F*e("./$.fails")(function(){function e(){}return!(Reflect.construct(function(){},[],e)instanceof e)}),"Reflect",{construct:function(e,t){s(e);var r=arguments.length<3?e:s(arguments[2]);if(e==r){if(void 0!=t)switch(i(t).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(u.apply(e,o))}var l=r.prototype,c=n.create(a(l)?l:Object.prototype),f=Function.apply.call(e,c,t);return a(f)?f:c}})},{"./$":95,"./$.a-function":63,"./$.an-object":65,"./$.core":71,"./$.export":76,"./$.fails":78,"./$.is-object":87}],132:[function(e,t,r){"use strict";var n=e("./$.collection-strong");e("./$.collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},{"./$.collection":70,"./$.collection-strong":68}],133:[function(e,t,r){"use strict";var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":91,"./$.string-at":110}],134:[function(e,t,r){"use strict";var n=e("./$.export"),o=e("./$.to-length"),s=e("./$.string-context"),i="startsWith",a=""[i];n(n.P+n.F*e("./$.fails-is-regexp")(i),"String",{startsWith:function(e){var t=s(this,e,i),r=arguments,n=o(Math.min(r.length>1?r[1]:void 0,t.length)),u=String(e);return a?a.call(t,u,n):t.slice(n,n+u.length)===u}})},{"./$.export":76,"./$.fails-is-regexp":77,"./$.string-context":111,"./$.to-length":115}],135:[function(e,t,r){var n=e("./$.export");n(n.P,"Set",{toJSON:e("./$.collection-to-json")("Set")})},{"./$.collection-to-json":69,"./$.export":76}],136:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":94,"./es6.array.iterator":123}],137:[function(e,t,r){t.exports=function(e){return e=e||/\W/g,function(t){return t=String(t),t.replace(e,function(e){var t=e[0].charCodeAt(0),r=[];return 128>t?r.push(t):t>=128&&2048>t?(r.push(t>>6|192),r.push(63&t|128)):(r.push(t>>12|224),r.push(t>>6&63|128),r.push(63&t|128)),r.map(function(e){return"%"+e.toString(16).toUpperCase()}).join("")})}}},{}],138:[function(e,t,r){(function(e){!function(n){function o(e){throw new RangeError(M[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function i(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(E,".");var o=e.split("."),i=s(o,t).join(".");return n+i}function a(e){for(var t,r,n=[],o=0,s=e.length;s>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&s>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function u(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:w}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function f(e,t,r){var n=0;for(e=r?T(e/O):e>>1,e+=T(e/t);e>C*_>>1;n+=w)e=T(e/C);return T(n+(C+1)*e/(e+k))}function p(e){var t,r,n,s,i,a,c,p,h,d,m=[],b=e.length,g=0,v=A,y=q;for(r=e.lastIndexOf(S),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),m.push(e.charCodeAt(n));for(s=r>0?r+1:0;b>s;){for(i=g,a=1,c=w;s>=b&&o("invalid-input"),p=l(e.charCodeAt(s++)),(p>=w||p>T(($-g)/a))&&o("overflow"),g+=p*a,h=y>=c?x:c>=y+_?_:c-y,!(h>p);c+=w)d=w-h,a>T($/d)&&o("overflow"),a*=d;t=m.length+1,y=f(g-i,t,0==i),T(g/t)>$-v&&o("overflow"),v+=T(g/t),g%=t,m.splice(g++,0,v)}return u(m)}function h(e){var t,r,n,s,i,u,l,p,h,d,m,b,g,v,y,j=[];for(e=a(e),b=e.length,t=A,r=0,i=q,u=0;b>u;++u)m=e[u],128>m&&j.push(F(m));for(n=s=j.length,s&&j.push(S);b>n;){for(l=$,u=0;b>u;++u)m=e[u],m>=t&&l>m&&(l=m);for(g=n+1,l-t>T(($-r)/g)&&o("overflow"),r+=(l-t)*g,t=l,u=0;b>u;++u)if(m=e[u],t>m&&++r>$&&o("overflow"),m==t){for(p=r,h=w;d=i>=h?x:h>=i+_?_:h-i,!(d>p);h+=w)y=p-d,v=w-d,j.push(F(c(d+y%v,0))),p=T(y/v);j.push(F(c(p,0))),i=f(r,g,n==s),r=0,++n}++r,++t}return j.join("")}function d(e){return i(e,function(e){return I.test(e)?p(e.slice(4).toLowerCase()):e})}function m(e){return i(e,function(e){return P.test(e)?"xn--"+h(e):e})}var b="object"==typeof r&&r&&!r.nodeType&&r,g="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;(v.global===v||v.window===v||v.self===v)&&(n=v);var y,j,$=2147483647,w=36,x=1,_=26,k=38,O=700,q=72,A=128,S="-",I=/^xn--/,P=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=w-x,T=Math.floor,F=String.fromCharCode;if(y={version:"1.3.2",ucs2:{decode:a,encode:u},decode:p,encode:h,toASCII:m,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(b&&g)if(t.exports==b)g.exports=y;else for(j in y)y.hasOwnProperty(j)&&(b[j]=y[j]);else n.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],139:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,s){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var f,p,h,d,m=e[c].replace(a,"%20"),b=m.indexOf(r);b>=0?(f=m.substr(0,b),p=m.substr(b+1)):(f=m,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),n(i,h)?o(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],140:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(i(e),function(i){var a=encodeURIComponent(o(i))+r;return s(e[i])?n(e[i],function(e){return a+encodeURIComponent(o(e))}).join(t):a+encodeURIComponent(o(e[i]))}).join(t):a?encodeURIComponent(o(a))+r+encodeURIComponent(o(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],141:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":139,"./encode":140}],142:[function(e,t,r){t.exports=function(){function t(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var r={parse:function(r,n){function o(e){$>y||(y>$&&($=y,w=[]),w.push(e))}function s(){var e,t,r;for(r=y,e=[],t=d(),null===t&&(t=i());null!==t;)e.push(t),t=d(),null===t&&(t=i());return null!==e&&(e=function(e,t){return new _(t)}(r,e)),null===e&&(y=r),e}function i(){var e,t,n,s,i,u;return i=y,u=y,123===r.charCodeAt(y)?(e="{",y++):(e=null,0===j&&o('"{"')),null!==e?(t=a(),null!==t?(n=l(),null!==n?(125===r.charCodeAt(y)?(s="}",y++):(s=null,0===j&&o('"}"')),null!==s?e=[e,t,n,s]:(e=null,y=u)):(e=null,y=u)):(e=null,y=u)):(e=null,y=u),null!==e&&(e=function(e,t,r){return k(t,r)}(i,e[1],e[2])),null===e&&(y=i),e}function a(){var e;return/^[\/;:.?&+#]/.test(r.charAt(y))?(e=r.charAt(y),y++):(e=null,0===j&&o("[\\/;:.?&+#]")),null===e&&(e=""),e}function u(){var e;return"{/"===r.substr(y,2)?(e="{/",y+=2):(e=null,0===j&&o('"{/"')),e}function l(){var e,t,n,s,i,a,u,l;if(i=y,a=y,e=c(),null!==e){for(t=[],u=y,l=y,44===r.charCodeAt(y)?(n=",",y++):(n=null,0===j&&o('","')),null!==n?(s=c(),null!==s?n=[n,s]:(n=null,y=l)):(n=null,y=l),null!==n&&(n=function(e,t){return t}(u,n[1])),null===n&&(y=u);null!==n;)t.push(n),u=y,l=y,44===r.charCodeAt(y)?(n=",",y++):(n=null,0===j&&o('","')),null!==n?(s=c(),null!==s?n=[n,s]:(n=null,y=l)):(n=null,y=l),null!==n&&(n=function(e,t){return t}(u,n[1])),null===n&&(y=u);null!==t?e=[e,t]:(e=null,y=a)}else e=null,y=a;return null!==e&&(e=function(e,t,r){return r.unshift(t),r}(i,e[0],e[1])),null===e&&(y=i),e}function c(){var e,t,n,s,i;for(s=y,i=y,e=[],/^[a-zA-Z0-9_.%]/.test(r.charAt(y))?(t=r.charAt(y),y++):(t=null,0===j&&o("[a-zA-Z0-9_.%]"));null!==t;)e.push(t),/^[a-zA-Z0-9_.%]/.test(r.charAt(y))?(t=r.charAt(y),y++):(t=null,0===j&&o("[a-zA-Z0-9_.%]"));return null!==e?(t=f(),null===t&&(t=p()),t=null!==t?t:"",null!==t?(n=m(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,y=i)):(e=null,y=i)):(e=null,y=i),null!==e&&(e=function(e,t,r,n){return r=r||{},{name:t.join(""),explode:r.listMarker,cut:r.cut,extended:n}}(s,e[0],e[1],e[2])),null===e&&(y=s),e}function f(){var e,t;return t=y,e=h(),null!==e&&(e=function(e,t){return{cut:t}}(t,e)),null===e&&(y=t),e}function p(){var e,t;return t=y,42===r.charCodeAt(y)?(e="*",y++):(e=null,0===j&&o('"*"')),null!==e&&(e=function(e,t){return{listMarker:t}}(t,e)),null===e&&(y=t),e}function h(){var e,t,n,s,i;if(s=y,i=y,58===r.charCodeAt(y)?(e=":",y++):(e=null,0===j&&o('":"')),null!==e){if(/^[0-9]/.test(r.charAt(y))?(n=r.charAt(y),y++):(n=null,0===j&&o("[0-9]")),null!==n)for(t=[];null!==n;)t.push(n),/^[0-9]/.test(r.charAt(y))?(n=r.charAt(y),y++):(n=null,0===j&&o("[0-9]"));else t=null;null!==t?e=[e,t]:(e=null,y=i)}else e=null,y=i;return null!==e&&(e=function(e,t){return parseInt(t.join(""))}(s,e[1])),null===e&&(y=s),e}function d(){var e,t,n;if(n=y,/^[^{]/.test(r.charAt(y))?(t=r.charAt(y),y++):(t=null,0===j&&o("[^{]")),null!==t)for(e=[];null!==t;)e.push(t),/^[^{]/.test(r.charAt(y))?(t=r.charAt(y),y++):(t=null,0===j&&o("[^{]"));else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(y=n),e}function m(){var e,t,n,s,i;if(s=y,i=y,40===r.charCodeAt(y)?(e="(",y++):(e=null,0===j&&o('"("')),null!==e){if(/^[^)]/.test(r.charAt(y))?(n=r.charAt(y),y++):(n=null,0===j&&o("[^)]")),null!==n)for(t=[];null!==n;)t.push(n),/^[^)]/.test(r.charAt(y))?(n=r.charAt(y),y++):(n=null,0===j&&o("[^)]"));else t=null;null!==t?(41===r.charCodeAt(y)?(n=")",y++):(n=null,0===j&&o('")"')),null!==n?e=[e,t,n]:(e=null,y=i)):(e=null,y=i)}else e=null,y=i;return null!==e&&(e=function(e,t){return t.join("")}(s,e[1])),null===e&&(y=s),e}function b(e){e.sort();for(var t=null,r=[],n=0;n<e.length;n++)e[n]!==t&&(r.push(e[n]),t=e[n]);return r}function g(){for(var e=1,t=1,n=!1,o=0;o<Math.max(y,$);o++){var s=r.charAt(o);"\n"===s?(n||e++,t=1,n=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e++,t=1,n=!0):(t++,n=!1)}return{line:e,column:t}}var v={uriTemplate:s,expression:i,op:a,pathExpression:u,paramList:l,param:c,cut:f,listMarker:p,substr:h,nonexpression:d,extension:m};if(void 0!==n){if(void 0===v[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="uriTemplate";var y=0,j=0,$=0,w=[],x=e("./lib/classes"),_=x.Template,k=x.expression,O=v[n]();if(null===O||y!==r.length){var q=Math.max(y,$),A=q<r.length?r.charAt(q):null,S=g();throw new this.SyntaxError(b(w),A,q,S.line,S.column)}return O},toSource:function(){return this._source}};return r.SyntaxError=function(e,r,n,o,s){function i(e,r){var n,o;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return o=r?t(r):"end of input","Expected "+n+" but "+o+" found."}this.name="SyntaxError",this.expected=e,this.found=r,this.message=i(e,r),this.offset=n,this.line=o,this.column=s},r.SyntaxError.prototype=Error.prototype,r}()},{"./lib/classes":143}],143:[function(e,t,r){(function(){var r,n,o,s,i,a,u,l,c,f,p,h,d,m,b,g,v,y,j,$=function(e,t){return function(){return e.apply(t,arguments)}},w={}.hasOwnProperty,x=function(e,t){function r(){this.constructor=e}for(var n in t)w.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};p=e("./encoders"),f=f=function(){function e(e){var t,r=this;this.expressions=[],this.prefix="string"==typeof e[0]?e.shift():"",t=0,e.forEach(function(e){switch(typeof e){case"object":return r.expressions[t++]=e;case"string":return r.expressions[t-1].suffix=e}})}return e.prototype.expand=function(e){return this.prefix+this.expressions.map(function(t){return t.expand(e)}).join("")},e.prototype.toString=function(){return this.prefix+this.expressions.join("")},e.prototype.toJSON=function(){return this.toString()},e}(),c=function(){function e(e){this.params=e,this.explodeObject=$(this.explodeObject,this),this.explodeArray=$(this.explodeArray,this),this._expandPair=$(this._expandPair,this),this.stringifySingle=$(this.stringifySingle,this),this.encode=$(this.encode,this),null==this.params&&(this.params=[]),this.suffix=""}var t;return e.prototype.first="",e.prototype.sep=",",e.prototype.named=!1,e.prototype.empty="",e.prototype.allow="U",e.prototype.encode=function(e){return p[this.allow](e)},e.prototype.stringifySingle=function(e,t){var r,n,o;if(n=typeof t,"string"===n||"boolean"===n||"number"===n)return t=t.toString(),this.encode(t.substring(0,e.cut||t.length));if(Array.isArray(t)){if(e.cut)throw new Error("Prefixed Values do not support lists. Check "+e.name);return t.map(this.encode).join(",")}if(e.cut)throw new Error("Prefixed Values do not support maps. Check "+e.name);return function(){var e;e=[];for(r in t)o=t[r],e.push([r,o].map(this.encode).join(","));return e}.call(this).join(",")},e.prototype.expand=function(e){var r,n,o=this;return r=t(this.params,e),n=r.map(function(e){return o._expandPair.apply(o,e)}).join(this.sep),n?this.first+n+this.suffix:this.empty&&r.length?this.empty+this.suffix:this.suffix},t=function(e,t){return e.map(function(e){return[e,t[e.name]]}).filter(function(e){var t,r,n;switch(r=e[1],typeof r){case"undefined":return!1;case"object":Array.isArray(r)&&r.length>0;for(t in r)if(n=r[t])return!0;return!1;default:return!0}})},e.prototype._expandPair=function(e,t){var r;return r=e.name,e.explode?Array.isArray(t)?this.explodeArray(e,t):"string"==typeof t?this.stringifySingle(e,t):this.explodeObject(t):this.stringifySingle(e,t)},e.prototype.explodeArray=function(e,t){return t.map(this.encode).join(this.sep)},e.prototype.explodeObject=function(e){var t,r,n,o,s,i;r=[];for(t in e)if(n=e[t],t=this.encode(t),Array.isArray(n))for(s=0,i=n.length;i>s;s++)o=n[s],r.push([t,this.encode(o)]);else r.push([t,this.encode(n)]);return r.map(function(e){return e.join("=")}).join(this.sep)},e.prototype.toString=function(){var e;return e=this.params.map(function(e){return e.name+e.explode}).join(","),"{"+this.first+e+"}"+this.suffix},e.prototype.toJSON=function(){return this.toString()},e}(),i=function(e){function t(){return this.explodeArray=$(this.explodeArray,this),this.stringifySingle=$(this.stringifySingle,this),h=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.stringifySingle=function(e,r){return r=(r=t.__super__.stringifySingle.apply(this,arguments))?"="+r:this.empty,""+e.name+r},t.prototype.explodeArray=function(e,t){var r=this;return t.map(function(t){return""+e.name+"="+r.encode(t)}).join(this.sep)},t}(c),l=function(e){function t(){return d=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.encode=function(e){return p["U+R"](e)},t.prototype.toString=function(){return"{+"+t.__super__.toString.apply(this,arguments).substring(1)},t}(c),o=function(e){function t(){return m=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.first="#",t.prototype.empty="#",t.prototype.encode=function(e){return p["U+R"](e)},t}(c),s=function(e){function t(){return b=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.first=".",t.prototype.sep=".",t.prototype.empty=".",t}(c),u=function(e){function t(){return g=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.first="/",t.prototype.sep="/",t}(c),a=function(e){function t(){return v=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.first=";",t.prototype.sep=";",t}(i),n=function(e){function t(){return y=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.first="?",t.prototype.sep="&",t.prototype.empty="=",t}(i),r=function(e){function t(){return j=t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.first="&",t}(n),t.exports={Template:f,SimpleExpression:c,NamedExpression:i,ReservedExpression:l,FragmentExpression:o,LabelExpression:s,PathSegmentExpression:u,PathParamExpression:a,FormStartExpression:n,FormContinuationExpression:r,expression:function(e,t){var i;return new(i=function(){switch(e){case"":return c;case"+":return l;case"#":return o;case".":return s;case"/":return u;case";":return a;case"?":return n;case"&":return r}}())(t)}}}).call(this)},{"./encoders":144}],144:[function(e,t,r){(function(){var t;t=e("pct-encode"),r.U=t(/[^\w~.-]/g),r["U+R"]=t(/[^\w.~:\/\?#\[\]@!\$&'()*+,;=-]/g)}).call(this)},{"pct-encode":137}],145:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&l(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function s(e){return u(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function i(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function f(e){return null==e}var p=e("punycode");r.parse=o,r.resolve=i,r.resolveObject=a,r.format=s,r.Url=n;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],b=["{","}","|","\\","^","`"].concat(m),g=["'"].concat(b),v=["%","/","?",";","#"].concat(g),y=["/","?","#"],j=255,$=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={
javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=e("querystring");n.prototype.parse=function(e,t,r){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var o=h.exec(n);if(o){o=o[0];var s=o.toLowerCase();this.protocol=s,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var i="//"===n.substr(0,2);!i||o&&_[o]||(n=n.substr(2),this.slashes=!0)}if(!_[o]&&(i||o&&!k[o])){for(var a=-1,l=0;l<y.length;l++){var c=n.indexOf(y[l]);-1!==c&&(-1===a||a>c)&&(a=c)}var f,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(f=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(f)),a=-1;for(var l=0;l<v.length;l++){var c=n.indexOf(v[l]);-1!==c&&(-1===a||a>c)&&(a=c)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var b=this.hostname.split(/\./),l=0,q=b.length;q>l;l++){var A=b[l];if(A&&!A.match($)){for(var S="",I=0,P=A.length;P>I;I++)S+=A.charCodeAt(I)>127?"x":A[I];if(!S.match($)){var E=b.slice(0,l),M=b.slice(l+1),C=A.match(w);C&&(E.push(C[1]),M.unshift(C[2])),M.length&&(n="/"+M.join(".")+n),this.hostname=E.join(".");break}}}if(this.hostname=this.hostname.length>j?"":this.hostname.toLowerCase(),!m){for(var T=this.hostname.split("."),F=[],l=0;l<T.length;++l){var z=T[l];F.push(z.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(z):z)}this.hostname=F.join(".")}var R=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+R,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!x[s])for(var l=0,q=g.length;q>l;l++){var L=g[l],N=encodeURIComponent(L);N===L&&(N=escape(L)),n=n.split(L).join(N)}var W=n.indexOf("#");-1!==W&&(this.hash=n.substr(W),n=n.slice(0,W));var D=n.indexOf("?");if(-1!==D?(this.search=n.substr(D),this.query=n.substr(D+1),t&&(this.query=O.parse(this.query)),n=n.slice(0,D)):t&&(this.search="",this.query={}),n&&(this.pathname=n),k[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var R=this.pathname||"",z=this.search||"";this.path=R+z}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(s=O.stringify(this.query));var i=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+o+r+i+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||_[e.protocol])r.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var s=r.pathname||"",i=r.search||"";r.path=s+i}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),p=l||a||r.host&&e.pathname,h=p,d=r.pathname&&r.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],m=r.protocol&&!k[r.protocol];if(m&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),p=p&&(""===o[0]||""===d[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=e.search,r.query=e.query;else if(!f(e.search)){if(m){r.hostname=r.host=d.shift();var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.host=r.hostname=b.shift())}return r.search=e.search,r.query=e.query,c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var g=d.slice(-1)[0],v=(r.host||e.host)&&("."===g||".."===g)||""===g,y=0,j=d.length;j>=0;j--)g=d[j],"."==g?d.splice(j,1):".."===g?(d.splice(j,1),y++):y&&(d.splice(j,1),y--);if(!p&&!h)for(;y--;y)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),v&&"/"!==d.join("/").substr(-1)&&d.push("");var $=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){r.hostname=r.host=$?"":d.length?d.shift():"";var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.host=r.hostname=b.shift())}return p=p||r.host&&d.length,p&&!$&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:138,querystring:141}]},{},[4]);